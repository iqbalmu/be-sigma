<% layout('partials/main') %>

    <% if (message.length> 0) { %>
        <div class="alert alert-warning alert-dismissible fade show text-center" role="alert">
            <strong>
                <%= message %>
            </strong>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <% } %>

            <!-- Page Heading -->
            <h1 class="h3 mb-4 text-gray-800">Manage User</h1>

            <!-- Page Content -->
            <div class="row">

                <div class="col-lg-12">

                    <!-- Card with Form -->
                    <div class="card shadow-sm">
                        <div class="card-body">

                            <form method="post" action="/admin/users/<%= user.id %>?_method=PUT"
                                enctype="multipart/form-data">

                                <div class="row px-4 py-2">

                                    <!-- Left Column -->
                                    <div class="col-md-8" style="padding-right: 50px;">

                                        <!-- Nama Barang -->
                                        <div class="form-group">
                                            <label for="namaBarang">Nama Pegawai</label>
                                            <input type="text" name="name" class="form-control" id="namaBarang"
                                                placeholder="Name" value="<%= user.profile.name %>">
                                        </div>

                                        <!-- Email -->
                                        <div class="form-group">
                                            <label for="email">Email</label>
                                            <input type="text" name="email" class="form-control" id="email"
                                                placeholder="email" value="<%= user.profile.email %>">
                                        </div>

                                        <!-- phone -->
                                        <div class="form-group">
                                            <label for="phone">No HP</label>
                                            <input type="text" name="phone" class="form-control" id="phone"
                                                placeholder="phone" value="<%= user.profile.phone %>">
                                        </div>

                                        <div class="form-row">
                                            <!-- Id -->
                                            <div class="form-group col-md-6">
                                                <label for="id">Id Pegawai</label>
                                                <input type="number" name="id" class="form-control" id="id"
                                                    placeholder="id" value="<%= user.id %>" readonly>
                                            </div>

                                            <!-- role -->
                                            <div class="form-group col-md-6">
                                                <label for="role">Role</label>
                                                <select class="form-control" name="roleId" id="role">
                                                    <option value="<%= user.role.id %>" selected>
                                                        <%= user.role.name %>
                                                    </option>
                                                    <option value="1">Admin</option>
                                                    <option value="2">User</option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- Password -->
                                        <div class="form-group">
                                            <label for="password">Password</label>
                                            <input type="password" name="password" class="form-control" id="password"
                                                placeholder="Type to update password">
                                        </div>

                                    </div>
                                    <!-- End of Left Column -->

                                    <!-- Right Column -->
                                    <div class="col-md-4">

                                        <!-- Preview Gambar -->
                                        <div class="form-group">
                                            <div id="preview"
                                                style="height: 250px; width: 100%; background-color: rgb(198, 198, 198); display: flex; justify-content: center; align-items: center; border-radius: 5px;">
                                                <img src="/upload/user-profiles/<%= user.profile.images %>"
                                                    alt="Image Preview" class="img-fluid"
                                                    style="object-fit: contain;height: 250px; width: 100%;">
                                            </div>
                                        </div>

                                        <!-- Input Gambar -->
                                        <div class="form-group">
                                            <label for="images">Tambahkan Gambar</label>
                                            <input type="file" name="images" class="form-control-file" id="images"
                                                onchange="previewImage()">
                                        </div>

                                    </div>
                                    <!-- End of Right Column -->

                                </div>

                                <!-- End of Row -->
                                <div class="d-flex justify-content-end mt-5">
                                    <!-- Submit Button -->
                                    <button type="submit" class="btn mx-1"
                                        style="background-color: #003F62; color: white;">Update</button>
                                    <a href="/admin/users/<%= user.id %>/delete" class="btn btn-danger mx-1"
                                        onclick="return confirm('are you sure want to deleted it?')">Delete</a>
                                    <a class="btn btn-outline-secondary mx-1" href="/admin/users">Cancel</a>
                                </div>
                            </form>

                        </div>
                    </div>
                    <!-- End of Card with Form -->

                </div>

            </div>
            <!-- End of Page Content -->